{"version":3,"sources":["webpack:///webpack/bootstrap 1ec1b8a812f77e62702b","webpack:///./config/index.js","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./server/utils/index.js","webpack:///external \"path\"","webpack:///./server/utils/fetcher.js","webpack:///external \"fs\"","webpack:///./nuxt.config.js","webpack:///./server/routes.js","webpack:///external \"koa\"","webpack:///external \"koa-respond\"","webpack:///external \"koa-router\"","webpack:///external \"nuxt\"","webpack:///./server/controllers/article.js","webpack:///./server/controllers/hook.js","webpack:///./server/controllers/index.js","webpack:///./server/controllers/option.js","webpack:///./server/controllers/user.js","webpack:///./server/utils/exec.js","webpack:///./server/utils/loadOption.js","webpack:///./server/utils/marked.js","webpack:///external \"axios\"","webpack:///external \"child_process\"","webpack:///external \"highlight.js\"","webpack:///external \"highlight.js/lib/languages/bash\"","webpack:///external \"highlight.js/lib/languages/css\"","webpack:///external \"highlight.js/lib/languages/http\"","webpack:///external \"highlight.js/lib/languages/java\"","webpack:///external \"highlight.js/lib/languages/javascript\"","webpack:///external \"highlight.js/lib/languages/json\"","webpack:///external \"highlight.js/lib/languages/makefile\"","webpack:///external \"highlight.js/lib/languages/markdown\"","webpack:///external \"highlight.js/lib/languages/nginx\"","webpack:///external \"highlight.js/lib/languages/python\"","webpack:///external \"highlight.js/lib/languages/scss\"","webpack:///external \"highlight.js/lib/languages/sql\"","webpack:///external \"highlight.js/lib/languages/stylus\"","webpack:///external \"highlight.js/lib/languages/xml\"","webpack:///external \"js-yaml\"","webpack:///external \"marked\"","webpack:///external \"node-watch\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"simple-node-logger\"","webpack:///./server/index.js"],"names":["baseService","url","method","baseURL","headers","timeout","responseType","common","code","FAILED","SUCCESS","UNAUTHORIZED","github","owner","repo","clientId","clientSecret","repoLocalDir","command","PULL","ADD","COMMIT","PUSH","client","service","Object","assign","proxy","host","port","process","env","PORT","server","allowedOrigins","timestampFormat","logger","simpleNodeLogger","createRollingFileLogger","logDirectory","path","resolve","__dirname","fileNamePattern","createSimpleLogger","ctx","type","next","support","handleError","message","handleRequest","handleSuccess","data","info","success","err","end","error","keys","length","console","failed","fetcher","axios","create","config","isProd","module","exports","srcDir","cache","max","maxAge","dev","head","title","titleTemplate","meta","charset","content","name","hid","link","rel","href","css","src","lang","loading","build","analyze","vendor","plugins","ssr","router","linkActiveClass","transition","mode","use","request","response","origin","get","allowed","includes","query","_DEV_","find","item","set","status","body","all","hookController","option","articleController","list","like","userController","me","mdImageReg","articleCtrl","GET","page","per_page","search","labels","res","q","params","sort","order","client_id","client_secret","catch","prev","articles","items","map","articleParser","pagination","Number","total","total_count","filter","state","direction","number","Accept","detail","isLiked","user","login","POST","post","splits","split","thumb","cap","exec","marked","dir","fs","existsSync","mkdirSync","cwd","pullRepo","hookCtrl","payload","global","loadOption","optionCtrl","userCtrl","require","cmd","opts","Promise","reject","Error","stdout","stderr","log","yaml","safeLoad","readFileSync","links","fetchLinks","loadYml","optionFile","join","watchYml","watch","recursive","evt","site","then","avatar","avatar_url","slogan","bio","blog","languages","highlight","registerLanguage","configure","classPrefix","renderer","Renderer","heading","text","level","generateId","isOrigin","indexOf","isImage","test","replace","image","options","xhtml","escaped","out","codeLine","line","index","escape","langPrefix","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","highlightAuto","value","len","chars","id","i","Math","floor","random","html","encode","app","HOST","nuxtConfig","nuxt","builder","e","exit","respond","methods","send","on","render","req","promise","prefix","routes","allowedMethods","listen"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1ec1b8a812f77e62702b","/**\n * @desc App Config\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nconst baseService = {\n  url: '/',\n  method: 'get',\n  baseURL: '/',\n  headers: {\n    'X-Requested-With': 'XMLHttpRequest',\n    'Accept': 'application/json'\n  },\n  timeout: 120000,\n  responseType: 'json'\n}\n\nexport default {\n  common: {\n    code: {\n      FAILED: -1,\n      SUCCESS: 0,\n      UNAUTHORIZED: 401\n    },\n    github: {\n      owner: 'jo0ger',\n      repo: 'jooger.me-source',\n      clientId: 'b4983366c4c7549a09f1',\n      clientSecret: '76fd8c26a21659d7eb925af0ed3498eabed49277',\n      repoLocalDir: '../jooger.me-source'\n    },\n    command: {\n      PULL: 'git pull ',\n      ADD: 'git add . ',\n      COMMIT: 'git commit -m \"update\" ',\n      PUSH: 'git push '\n    }\n  },\n  client: {\n    service: Object.assign({}, baseService, {\n      baseURL: '/api',\n      proxy: {\n        host: '127.0.0.1',\n        port: process.env.PORT || 3000\n      }\n    })\n  },\n  server: {\n    allowedOrigins: [\n      'jooger.me',\n      'www.jooger.me',\n      'blog.jooger.me'\n    ],\n    service: Object.assign({}, baseService, {\n      baseURL: 'https://api.github.com/'\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./config/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","/**\n * @desc Utils\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nimport path from 'path'\nimport simpleNodeLogger from 'simple-node-logger'\n\nexport { default as fetcher } from './fetcher'\n\nexport { default as marked } from './marked'\n\nexport { default as exec } from './exec'\n\nexport { default as loadOption } from './loadOption'\n\nconst timestampFormat = 'YYYY-MM-DD HH:mm:ss'\n\nexport const logger = (process.env.NODE_ENV === 'production' && process.env.log)\n  ? simpleNodeLogger.createRollingFileLogger({\n    timestampFormat,\n    logDirectory: path.resolve(__dirname, '..', 'logs'),\n    fileNamePattern: '<DATE>.log'\n  })\n  : simpleNodeLogger.createSimpleLogger({\n    timestampFormat\n  })\n\nexport async function handleRequest ({ ctx, type, next }) {\n  const method = ctx.method\n  const support = !!type[method]\n  if (support) {\n    await type[method](ctx, next)\n  } else {\n    handleError({ ctx, message: `${ctx.path}不支持${method}请求类型` })\n  }\n}\n\nexport function handleSuccess ({ ctx, message = '请求成功', data = {} }) {\n  logger.info(`接口：${ctx.path}，结果： ${message}`)\n  ctx.success({\n    message,\n    data: data || {}\n  })\n}\n\nexport function handleError ({ ctx, message = '请求失败', err = {} }, end = false) {\n  logger.error(`接口：${ctx.path}，结果： ${message}`)\n  Object.keys(err).length && console.error(err)\n  !end && ctx.failed({\n    message,\n    error: err || {}\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/index.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","/**\n * @desc Axios fetcher\n * @author Jooger <zzy1198258955@163.com>\n * @date 21 Sep 2017\n */\n\nimport axios from 'axios'\nimport config from '../../config'\n\nconst fetcher = axios.create(config.server.service)\n\nexport default fetcher\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/fetcher.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 5\n// module chunks = 0","const isProd = process.env.NODE_ENV === 'production'\n\nmodule.exports = {\n  srcDir: 'client/',\n  cache: {\n    max: 20,\n    maxAge: 600000\n  },\n  dev: !isProd,\n  head: {\n    title: 'Jooger.me - 凡心所向，一往无前',\n    titleTemplate: '%s - Jooger.me',\n    meta: [\n      { charset: 'utf-8' },\n      { 'http-equiv': 'X-UA-Compatible', content: 'IE=edge' },\n      { 'http-equiv': 'Cache-Control', content: 'no-transform' },\n      { 'http-equiv': 'Cache-Control', content: 'no-siteapp' },\n      { 'http-equiv': 'cleartype', content: 'on' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1.0, user-scalable=no' },\n      { name: 'MobileOptimized', content: '320' },\n      { name: 'HandheldFriendly', content: 'True' },\n      { name: 'apple-mobile-web-app-capable', content: 'yes' },\n      { name: 'author', content: 'zzy1198258955@163.com' },\n      { hid: 'keywords', name: 'keywords', content: 'Jooger,Jooger.me,Blog,FE,前端' },\n      { hid: 'description', name: 'description', content: '凡心所向，一往无前' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ]\n  },\n  css: [\n    'normalize.css',\n    'swiper/dist/css/swiper.css',\n    'gitalk/dist/gitalk.css',\n    { src: '~assets/stylus/index.styl', lang: 'stylus' }\n  ],\n  loading: '~/components/Common/PageLoading',\n  build: {\n    analyze: false,\n    vendor: [\n      'axios',\n      'swiper',\n      'bezier-easing',\n      'highlight.js',\n      'marked'\n    ]\n  },\n  plugins: [\n    { src: '~plugins/router.js' },\n    { src: '~plugins/filter.js' },\n    { src: '~plugins/swiper.js', ssr: false },\n    { src: '~plugins/image-load.js', ssr: false },\n    { src: '~plugins/image-popup.js', ssr: false }\n  ],\n  router: {\n    linkActiveClass: 'active'\n  },\n  transition: {\n    name: 'fade',\n    mode: 'out-in'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","/**\n * @desc server routes\n * @author Jooger <zzy1198258955@163.com>\n * @date 15 Sep 2017\n */\n\nimport config from '../config'\nimport { articleController, userController, hookController, optionController } from './controllers'\n\nexport default router => {\n  router.use('*', (ctx, next) => {\n    const { request, response } = ctx\n    const allowedOrigins = config.server.allowedOrigins\n    const origin = request.get('origin') || ''\n    const allowed = origin.includes('localhost') ||\n      (process.env.NODE_ENV === 'development' && request.query._DEV_) ||\n      allowedOrigins.find(item => origin.includes(item))\n    if (allowed) {\n      response.set('Access-Control-Allow-Origin', origin)\n    }\n    ctx.response.set('Content-Type', 'application/json;charset=utf-8')\n    response.set(\"Access-Control-Allow-Methods\", \"PUT,PATCH,POST,GET,DELETE,OPTIONS\")\n\n    if (request.method === 'OPTIONS') {\n      ctx.status = 200\n      ctx.body = 'ok'\n      return\n    }\n    \n    return next()\n  })\n\n  router.all('/webhook/option', hookController.option)\n\n  router.all('article-list', '/articles', articleController.list)\n  router.all('article-detail', '/article/:number', articleController.item)\n  router.all('article-like', '/article/:number/like', articleController.like)\n\n  router.all('user-me', '/user/me', userController.me)\n\n  router.all('option', '/option', optionController)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-respond\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-respond\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 11\n// module chunks = 0","/**\n * @desc Article controller\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nimport config from '../../config'\nimport { fetcher, handleRequest, handleSuccess, handleError, marked } from '../utils'\n\nconst mdImageReg = /^!\\[((?:\\[[^\\]]*\\]|[^[\\]]|\\](?=[^[]*\\]))*)\\]\\(\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)/\n\nconst articleCtrl = { list: {}, item: {}, like: {} }\n\nconst { owner, repo, clientId, clientSecret } = config.common.github\n\narticleCtrl.list.GET = async (ctx, next) => {\n  const { page = 1, per_page = 12, search = '', labels = '' } = ctx.query\n  let res = null\n  if (search) {\n    const q = `${search} type:issue is:public state:open in:title,body author:${owner} repo:${owner}/${repo}`\n    res = await fetcher.get('/search/issues', {\n      params: {\n        q,\n        sort: 'created',\n        order: 'asc',\n        client_id: clientId,\n        client_secret: clientSecret,\n        page,\n        per_page\n      }\n    }).catch(err => handleError({ ctx, err }))\n\n    if (res && res.data) {\n      const link = res.headers.link || ''\n      let prev = link.includes('rel=\"prev\"')\n      let next = link.includes('rel=\"next\"')\n      const articles = res.data.items ? res.data.items.map(item => {\n        item.body = articleParser(item.body)\n        return item\n      }) : []\n      handleSuccess({\n        ctx,\n        data: {\n          list: articles,\n          pagination: { prev, next, page: Number(page), per_page },\n          total: res.data.total_count\n        }\n      })\n    }\n  } else {\n    const params = {\n      filter: 'created',\n      state: 'open',\n      sort: 'created',\n      direction: 'desc',\n      client_id: clientId,\n      client_secret: clientSecret,\n      page,\n      per_page\n    }\n    if (labels) {\n      params.labels = labels\n    }\n    res = await fetcher.get(`/repos/${owner}/${repo}/issues`, { params })\n      .catch(err => handleError({ ctx, err }))\n    if (res && res.data) {\n      const link = res.headers.link || ''\n      let prev = link.includes('rel=\"prev\"')\n      let next = link.includes('rel=\"next\"')\n      const articles = res.data.map(item => {\n        item.body = articleParser(item.body)\n        return item\n      })\n      // ctx.response.set('Accept', 'application/vnd.github.squirrel-girl-preview')\n      handleSuccess({\n        ctx,\n        data: {\n          list: articles,\n          pagination: { prev, next, page: Number(page), per_page }\n        }\n      })\n    }\n  }\n\n  if (!res) {\n    handleError({ ctx })\n  }\n}\n\narticleCtrl.item.GET = async (ctx, next) => {\n  const number = ctx.params.number\n  const res = await fetcher.get(`/repos/${owner}/${repo}/issues/${number}`, {\n    headers: {\n      Accept: 'application/vnd.github.squirrel-girl-preview'\n    },\n    params: {\n      client_id: clientId,\n      client_secret: clientSecret\n    }\n  }).catch(err => handleError({ ctx, err }))\n  if (res && res.data) {\n    const detail = res.data\n    detail.body = articleParser(detail.body)\n    handleSuccess({\n      ctx,\n      data: detail\n    })\n  } else {\n    handleError({ ctx })\n  }\n}\n\narticleCtrl.like.GET = async (ctx, next) => {\n  const number = ctx.params.number\n  const res = await fetcher.get(`/repos/${owner}/${repo}/issues/${number}/reactions`, {\n    headers: {\n      Accept: 'application/vnd.github.squirrel-girl-preview'\n    },\n    params: {\n      content: 'heart',\n      per_page: 99999,\n      client_id: clientId,\n      client_secret: clientSecret\n    }\n  }).catch(err => handleError({ ctx, err }))\n\n  if (res && res.data) {\n    handleSuccess({\n      ctx,\n      data: {\n        list: res.data,\n        isLiked: !!res.data.find(item => item.user.login === owner)\n      }\n    })\n  } else {\n    handleError({ ctx })\n  }\n}\n\narticleCtrl.like.POST = async (ctx, next) => {\n  const number = ctx.params.number\n  const res = await fetcher.post(\n    `/repos/${owner}/${repo}/issues/${number}/reactions`,\n    {\n      content: 'heart',\n      client_id: clientId,\n      client_secret: clientSecret\n    },\n    {\n      headers: {\n        Accept: 'application/vnd.github.squirrel-girl-preview'\n      },\n      params: {\n        client_id: clientId,\n        client_secret: clientSecret\n      }\n    }\n  ).catch(err => handleError({ ctx, err }))\n\n  if (res && res.data) {\n    handleSuccess({ ctx })\n  } else {\n    handleError({ ctx })\n  }\n}\n\nfunction articleParser (content) {\n  const data = {}\n  const splits = content.split('\\r\\n')\n  const thumb = splits[0]\n  let cap = mdImageReg.exec(thumb)\n  if (cap) {\n    data.thumb = cap[2]\n  }\n  data.content = marked(content)\n  return data\n}\n\nexport default {\n  list: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: articleCtrl.list })\n  },\n  item: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: articleCtrl.item })\n  },\n  like: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: articleCtrl.like })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/article.js","/**\n * @desc Github Webhook controller\n * @author Jooger <zzy1198258955@163.com>\n * @date 20 Sep 2017\n */\n\nimport path from 'path'\nimport fs from 'fs'\nimport config from '../../config'\nimport { handleRequest, handleSuccess, handleError, exec, loadOption } from '../utils'\n\nconst isProd = process.env.NODE_ENV === 'production'\nconst { github, command } = config.common\nconst { repoLocalDir } = github\nconst hookCtrl = {\n  option: {}\n}\n\nhookCtrl.option.POST = async (ctx, next) => {\n  const { payload } = ctx.request.body\n\n  if (!payload) {\n    return handleError({\n      ctx,\n      message: 'payload不存在'\n    })\n  }\n\n  logger.info('----------------------option hook push start----------------------------')\n\n  await pullRepo(path.resolve(__dirname, '../../', repoLocalDir))\n\n  let option = global.option\n  if (isProd) {\n    option = await loadOption()\n  }\n\n  if (option) {\n    global.option = option\n    handleSuccess({ ctx, message: '配置更新成功' })\n  } else {\n    handleError({ ctx, message: '配置更新失败' })\n  }\n\n  logger.info('----------------------option hook push end----------------------------')\n}\n\n// 拉取仓库\nasync function pullRepo (dir) {\n  if (!fs.existsSync(dir)) {\n    fs.mkdirSync(dir)\n  }\n\n  const { PULL } = command\n  logger.info('正在拉取仓库...')\n  await exec(PULL, { cwd: dir }).catch(err => console.error(err))\n  logger.info('拉取仓库完成')\n}\n\nexport default {\n  option: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: hookCtrl.option })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/hook.js","/**\n * @desc Controllers entry\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nexport { default as articleController } from './article'\nexport { default as userController } from './user'\nexport { default as hookController } from './hook'\nexport { default as optionController } from './option'\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/index.js","/**\n * @desc Option\n * @author Jooger <zzy1198258955@163.com>\n * @date 20 Sep 2017\n */\n\nimport { handleRequest, handleSuccess } from '../utils'\nconst optionCtrl = {}\n\noptionCtrl.GET = async (ctx, next) => {\n  handleSuccess({\n    ctx,\n    data: global.option || {}\n  })\n}\n\nexport default async (ctx, next) => {\n  await handleRequest({ ctx, next, type: optionCtrl })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/option.js","/**\n * @desc User controller\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nimport config from '../../config'\nimport { fetcher, handleRequest, handleSuccess, handleError } from '../utils'\nconst { owner, clientId, clientSecret } = config.common.github\nconst userCtrl = { me: {} }\n\nuserCtrl.me.GET = async (ctx, next) => {\n  const res = await fetcher.get(`/users/${owner}`, {\n    params: {\n      client_id: clientId,\n      client_secret: clientSecret\n    }\n  }).catch(err => handleError({ ctx, err }))\n\n  if (res && res.data) {\n    handleSuccess({\n      ctx,\n      data: res.data\n    })\n  } else {\n    handleError({ ctx })\n  }\n}\n\nexport default {\n  me: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: userCtrl.me })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","/**\n * @desc 利用Node原生异步子进程执行命令\n * @author Jooger <zzy1198258955@163.com>\n * @date 20 Sep 2017\n */\n\nconst { exec } = require('child_process')\n\nexport default (cmd, opts) => {\n  return new Promise((resolve, reject) => {\n    if (!cmd) {\n      return reject(new Error('command is required'))\n    }\n    exec(cmd, opts, (err, stdout, stderr) => {\n      if (err) {\n        return reject(err)\n      }\n      console.log(stdout, stderr)\n      resolve(stdout, stderr)\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/exec.js","/**\n * @desc Load Option\n * @author Jooger <zzy1198258955@163.com>\n * @date 21 Sep 2017\n */\n\nimport path from 'path'\nimport fs from 'fs'\nimport watch from 'node-watch'\nimport yaml from 'js-yaml'\nimport config from '../../config'\nimport fetcher from './fetcher'\n\nconst isProd = process.env.NODE_ENV === 'production'\n\nexport default async () => {\n  const dir = path.resolve(__dirname, '../../', config.common.github.repoLocalDir)\n  const optionFile = path.join(dir, './_config.yml')\n\n  let option = null\n\n  if (!fs.existsSync(optionFile)) {\n    logger.info('配置文件未找到')\n    return option\n  }\n\n  option = await loadYml(optionFile)\n\n  if (!isProd) {\n    watchYml(optionFile)\n  }\n\n  global.option = option\n\n  return option\n}\n\nasync function loadYml (path) {\n  let data = null\n  try {\n    data = yaml.safeLoad(fs.readFileSync(path, 'utf8'))\n  } catch (err) {\n    logger.info('配置文件读取失败, err：', err)\n    return data\n  }\n  logger.info('配置文件读取成功')\n\n  if (data.links) {\n    logger.info('开始抓取友链信息....')\n    data.links = await fetchLinks(data.links)\n    logger.info('抓取友链信息成功....')\n  }\n\n  logger.info('配置更新成功')\n\n  return data\n}\n\nfunction watchYml (path) {\n  watch(path, { recursive: true }, async (evt, name) => {\n    logger.info('配置文件有更新')\n    const data = await loadYml(path)\n    global.option = data\n  })\n  logger.info('正在监控配置文件变动...')\n}\n\n// 抓取github友链\nfunction fetchLinks (links) {\n  return Promise.all(\n    links.map(({ name, github, site }) => {\n      if (github) {\n        return fetcher.get(`/users/${github}`, {\n          params: {\n            client_id: config.common.github.clientId,\n            client_secret: config.common.github.clientSecret\n          }\n        }).then(res => {\n          if (res && res.status === 200) {\n            return {\n              name,\n              avatar: res.data.avatar_url,\n              slogan: res.data.bio,\n              link: site || res.data.blog\n            }\n          }\n          return {\n            name,\n            link: site\n          }\n        }).catch(() => ({\n          name,\n          link: site\n        }))\n      } else {\n        return new Promise((resolve, reject) => {\n          resolve({\n            name,\n            site\n          })\n        })\n      }\n    })\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/loadOption.js","/**\n *  渲染markdown\n */\n\nimport highlight from 'highlight.js'\nimport marked from 'marked'\n\nconst languages = ['xml', 'bash', 'css', 'markdown', 'http', 'java', 'javascript', 'json', 'makefile', 'nginx', 'python', 'scss', 'sql', 'stylus']\nhighlight.registerLanguage('xml', require('highlight.js/lib/languages/xml'))\nhighlight.registerLanguage('bash', require('highlight.js/lib/languages/bash'))\nhighlight.registerLanguage('css', require('highlight.js/lib/languages/css'))\nhighlight.registerLanguage('markdown', require('highlight.js/lib/languages/markdown'))\nhighlight.registerLanguage('http', require('highlight.js/lib/languages/http'))\nhighlight.registerLanguage('java', require('highlight.js/lib/languages/java'))\nhighlight.registerLanguage('javascript', require('highlight.js/lib/languages/javascript'))\nhighlight.registerLanguage('json', require('highlight.js/lib/languages/json'))\nhighlight.registerLanguage('makefile', require('highlight.js/lib/languages/makefile'))\nhighlight.registerLanguage('nginx', require('highlight.js/lib/languages/nginx'))\nhighlight.registerLanguage('python', require('highlight.js/lib/languages/python'))\nhighlight.registerLanguage('scss', require('highlight.js/lib/languages/scss'))\nhighlight.registerLanguage('sql', require('highlight.js/lib/languages/sql'))\nhighlight.registerLanguage('stylus', require('highlight.js/lib/languages/stylus'))\nhighlight.configure({\n  classPrefix: ''     // don't append class prefix\n})\n\nconst renderer = new marked.Renderer()\n\nrenderer.heading = function (text, level) {\n  return `<h${level} id=\"${generateId()}\">${text}</h${level}>`\n}\n\nrenderer.link = function (href, title, text) {\n  const isOrigin = href.indexOf('jooger.me') > -1\n  const isImage = /(<img.*?)>/gi.test(text)\n  return `\n    <a href=${href}\n    target=\"_blank\"\n    class=\"${isImage ? 'img-link' : 'link'}\"\n    ${isImage && 'onclick=\"\"'}\n    title=\"${title || ''}\"\n    ${isOrigin ? '' : 'rel=\"external nofollow\"'}>${text}</a>\n  `.replace(/\\s+/g, ' ').replace('\\n', '')\n}\n\nrenderer.image = function (href, title, text) {\n  return `\n    <img class=\"image-view\"\n      src=\"${href}\"\n      title=\"${title || text || 'jooger.me'}\"\n      alt=\"${text || title || href}\"\n    ${this.options.xhtml ? '/' : ''}>\n  `.replace(/\\s+/g, ' ').replace('\\n', '')\n}\n\nrenderer.code = function (code, lang, escaped) {\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang)\n    if (out != null && out !== code) {\n      escaped = true\n      code = out\n    }\n  }\n\n  const codeLine = '<ul class=\"code-line\">' +\n    code.split('\\n').map((line, index) => `<li class=\"line\">${index + 1}</li>`.replace(/\\s+/g, ' ')).join('') +\n    '</ul>'\n\n  if (!lang) {\n    return '<pre>' + codeLine + '<code>' +\n      (escaped ? code : escape(code, true)) +\n      '\\n</code></pre>'\n  }\n\n  return '<pre>' + codeLine + '<code class=\"' +\n    this.options.langPrefix +\n    escape(lang, true) +\n    '\">' +\n    (escaped ? code : escape(code, true)) +\n    '\\n</code></pre>\\n'\n}\n\nmarked.setOptions({\n  renderer,\n  gfm: true,\n  pedantic: false,\n  sanitize: false,\n  tables: true,\n  breaks: true,\n  smartLists: true,\n  smartypants: true,\n  highlight (code, lang) {\n    if (!~languages.indexOf(lang)) {\n      return highlight.highlightAuto(code).value\n    }\n    return highlight.highlight(lang, code).value\n  }\n})\n\n// 生成文章中的title id\nfunction generateId (len) {\n  const chars = `ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz`\n  len = len | 8\n  let id = ''\n  for (let i = 0; i < len; i++) {\n    id += chars[Math.floor(Math.random() * chars.length)]\n  }\n  return id\n}\n\nfunction escape (html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;')\n}\n\nexport default marked\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/marked.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"highlight.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/bash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/bash\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/css\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/css\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/http\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/java\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/java\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/javascript\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/json\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/makefile\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/makefile\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/markdown\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/markdown\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/nginx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/nginx\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/python\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/python\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/scss\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/scss\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/sql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/sql\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/stylus\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/stylus\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/xml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/xml\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"marked\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"marked\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"node-watch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-watch\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"simple-node-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"simple-node-logger\"\n// module id = 41\n// module chunks = 0","import Koa from 'koa'\nimport Router from 'koa-router'\nimport respond from 'koa-respond'\nimport { Nuxt, Builder } from 'nuxt'\nimport routes from './routes'\nimport config from '../config'\nimport nuxtConfig from '../nuxt.config'\nimport { logger, loadOption } from './utils'\n\nglobal.logger = logger\nloadOption().then(option => {\n  global.option = option\n})\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3000\n\n// Set Nuxt.js options\nnuxtConfig.dev = !(app.env === 'production')\n\n// Instantiate nuxt.js\nconst nuxt = new Nuxt(nuxtConfig)\n\n// Build in development\nif (nuxtConfig.dev) {\n  const builder = new Builder(nuxt)\n  builder.build().catch(e => {\n    console.error(e) // eslint-disable-line no-console\n    process.exit(1)\n  })\n}\n\napp.use(respond({\n  methods: {\n    success: (ctx, body) => {\n      body = Object.assign({}, {\n        code: config.common.code.SUCCESS\n      }, body)\n      ctx.send(200, body)\n    },\n    failed: (ctx, body) => {\n      body = Object.assign({}, {\n        code: config.common.code.FAILED\n      }, body)\n      ctx.send(200, body)\n    }\n  }\n}))\n\napp.use((ctx, next) => {\n  if (ctx.url.includes('/api')) {\n    return next()\n  }\n  ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n  return new Promise((resolve, reject) => {\n    ctx.res.on('close', resolve)\n    ctx.res.on('finish', resolve)\n    nuxt.render(ctx.req, ctx.res, promise => {\n      // nuxt.render passes a rejected promise into callback on error.\n      promise.then(resolve).catch(reject)\n    })\n  })\n})\n\nconst router = new Router({\n  prefix: '/api'\n})\nroutes(router)\napp.use(router.routes(), router.allowedMethods())\n\napp.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}