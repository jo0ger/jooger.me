{"version":3,"sources":["webpack:///webpack/bootstrap 50f77337be02162ced7b","webpack:///./config/index.js","webpack:///./server/utils/index.js","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///./nuxt.config.js","webpack:///./server/routes.js","webpack:///external \"koa\"","webpack:///external \"koa-respond\"","webpack:///external \"koa-router\"","webpack:///external \"nuxt\"","webpack:///./server/controllers/article.js","webpack:///./server/controllers/hook.js","webpack:///./server/controllers/index.js","webpack:///./server/controllers/option.js","webpack:///./server/controllers/user.js","webpack:///./server/utils/exec.js","webpack:///./server/utils/loadOption.js","webpack:///./server/utils/marked.js","webpack:///external \"axios\"","webpack:///external \"child_process\"","webpack:///external \"highlight.js\"","webpack:///external \"highlight.js/lib/languages/bash\"","webpack:///external \"highlight.js/lib/languages/css\"","webpack:///external \"highlight.js/lib/languages/http\"","webpack:///external \"highlight.js/lib/languages/java\"","webpack:///external \"highlight.js/lib/languages/javascript\"","webpack:///external \"highlight.js/lib/languages/json\"","webpack:///external \"highlight.js/lib/languages/makefile\"","webpack:///external \"highlight.js/lib/languages/markdown\"","webpack:///external \"highlight.js/lib/languages/nginx\"","webpack:///external \"highlight.js/lib/languages/python\"","webpack:///external \"highlight.js/lib/languages/scss\"","webpack:///external \"highlight.js/lib/languages/sql\"","webpack:///external \"highlight.js/lib/languages/stylus\"","webpack:///external \"highlight.js/lib/languages/xml\"","webpack:///external \"js-yaml\"","webpack:///external \"marked\"","webpack:///external \"node-watch\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"simple-node-logger\"","webpack:///./server/index.js"],"names":["baseService","url","method","baseURL","headers","timeout","responseType","common","code","FAILED","SUCCESS","UNAUTHORIZED","github","owner","repo","clientId","clientSecret","repoLocalDir","command","PULL","ADD","COMMIT","PUSH","client","service","Object","assign","proxy","host","port","process","env","PORT","server","allowedOrigins","timestampFormat","fetcher","axios","create","config","logger","simpleNodeLogger","createRollingFileLogger","logDirectory","path","resolve","__dirname","fileNamePattern","createSimpleLogger","ctx","type","next","support","handleError","message","handleRequest","handleSuccess","data","info","success","err","end","error","keys","length","console","failed","isProd","module","exports","srcDir","cache","max","maxAge","dev","head","title","titleTemplate","meta","charset","content","name","hid","link","rel","href","css","src","lang","loading","build","analyze","vendor","plugins","ssr","router","linkActiveClass","transition","mode","use","request","response","origin","get","allowed","includes","query","_DEV_","find","item","set","status","body","all","hookController","option","articleController","list","like","userController","me","mdImageReg","articleCtrl","GET","page","per_page","search","labels","res","q","params","sort","order","client_id","client_secret","catch","prev","articles","items","map","articleParser","pagination","Number","total","total_count","filter","state","direction","number","Accept","detail","isLiked","user","login","POST","post","splits","split","thumb","cap","exec","marked","dir","fs","existsSync","mkdirSync","cwd","pullRepo","hookCtrl","payload","global","loadOption","optionCtrl","userCtrl","require","cmd","opts","Promise","reject","Error","stdout","stderr","log","optionFile","join","loadYml","watchYml","yaml","safeLoad","readFileSync","watch","recursive","evt","languages","highlight","registerLanguage","configure","classPrefix","renderer","Renderer","heading","text","level","generateId","isOrigin","indexOf","isImage","test","replace","image","options","xhtml","escaped","out","codeLine","line","index","escape","langPrefix","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","highlightAuto","value","len","chars","id","i","Math","floor","random","html","encode","app","HOST","nuxtConfig","nuxt","builder","e","exit","respond","methods","send","on","render","req","promise","then","prefix","routes","allowedMethods","listen"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 41);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 50f77337be02162ced7b","/**\n * @desc App Config\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nconst baseService = {\n  url: '/',\n  method: 'get',\n  baseURL: '/',\n  headers: {\n    'X-Requested-With': 'XMLHttpRequest',\n    'Accept': 'application/json'\n  },\n  timeout: 120000,\n  responseType: 'json'\n}\n\nexport default {\n  common: {\n    code: {\n      FAILED: -1,\n      SUCCESS: 0,\n      UNAUTHORIZED: 401\n    },\n    github: {\n      owner: 'jo0ger',\n      repo: 'git-hook-test',\n      clientId: 'b4983366c4c7549a09f1',\n      clientSecret: '76fd8c26a21659d7eb925af0ed3498eabed49277',\n      repoLocalDir: '../posts'\n    },\n    command: {\n      PULL: 'git pull ',\n      ADD: 'git add . ',\n      COMMIT: 'git commit -m \"update\" ',\n      PUSH: 'git push '\n    }\n  },\n  client: {\n    service: Object.assign({}, baseService, {\n      baseURL: '/api',\n      proxy: {\n        host: '127.0.0.1',\n        port: process.env.PORT || 3000\n      }\n    })\n  },\n  server: {\n    allowedOrigins: [\n      'jooger.me',\n      'www.jooger.me',\n      'blog.jooger.me'\n    ],\n    service: Object.assign({}, baseService, {\n      baseURL: 'https://api.github.com/'\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./config/index.js","/**\n * @desc Utils\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nimport path from 'path'\nimport axios from 'axios'\nimport simpleNodeLogger from 'simple-node-logger'\nimport config from '../../config'\n\nexport { default as marked } from './marked'\n\nexport { default as exec } from './exec'\n\nexport { default as loadOption } from './loadOption'\n\nconst timestampFormat = 'YYYY-MM-DD HH:mm:ss'\n\nexport const fetcher = axios.create(config.server.service)\n\nexport const logger = (process.env.NODE_ENV === 'production' && process.env.log)\n  ? simpleNodeLogger.createRollingFileLogger({\n    timestampFormat,\n    logDirectory: path.resolve(__dirname, '..', 'logs'),\n    fileNamePattern: '<DATE>.log'\n  })\n  : simpleNodeLogger.createSimpleLogger({\n    timestampFormat\n  })\n\nexport async function handleRequest ({ ctx, type, next }) {\n  const method = ctx.method\n  const support = !!type[method]\n  if (support) {\n    await type[method](ctx, next)\n  } else {\n    handleError({ ctx, message: `${ctx.path}不支持${method}请求类型` })\n  }\n}\n\nexport function handleSuccess ({ ctx, message = '请求成功', data = {} }) {\n  logger.info(`接口：${ctx.path}，结果： ${message}`)\n  ctx.success({\n    message,\n    data: data || {}\n  })\n}\n\nexport function handleError ({ ctx, message = '请求失败', err = {} }, end = false) {\n  logger.error(`接口：${ctx.path}，结果： ${message}`)\n  Object.keys(err).length && console.error(err)\n  !end && ctx.failed({\n    message,\n    error: err || {}\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 2\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 4\n// module chunks = 0","const isProd = process.env.NODE_ENV === 'production'\n\nmodule.exports = {\n  srcDir: 'client/',\n  cache: {\n    max: 20,\n    maxAge: 600000\n  },\n  dev: !isProd,\n  head: {\n    title: 'Jooger.me - Jooger jooger, chicken dinner',\n    titleTemplate: '%s - Jooger.me',\n    meta: [\n      { charset: 'utf-8' },\n      { 'http-equiv': 'X-UA-Compatible', content: 'IE=edge' },\n      { 'http-equiv': 'Cache-Control', content: 'no-transform' },\n      { 'http-equiv': 'Cache-Control', content: 'no-siteapp' },\n      { 'http-equiv': 'cleartype', content: 'on' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1.0, user-scalable=no' },\n      { name: 'MobileOptimized', content: '320' },\n      { name: 'HandheldFriendly', content: 'True' },\n      { name: 'apple-mobile-web-app-capable', content: 'yes' },\n      { name: 'author', content: 'zzy1198258955@163.com' },\n      { hid: 'keywords', name: 'keywords', content: 'Jooger,Jooger.me,Blog,FE,前端技术开发' },\n      { hid: 'description', name: 'description', content: 'Jooger jooger, chicken dinner' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n      { rel: 'stylesheet', href: '//at.alicdn.com/t/font_268993_tu4k21igcspgmn29.css' }\n    ]\n  },\n  css: [\n    'normalize.css',\n    'swiper/dist/css/swiper.css',\n    'gitalk/dist/gitalk.css',\n    { src: '~assets/stylus/index.styl', lang: 'stylus' }\n  ],\n  loading: '~/components/Common/PageLoading',\n  build: {\n    analyze: false,\n    vendor: [\n      'axios',\n      'swiper',\n      'bezier-easing',\n      'highlight.js',\n      'marked'\n    ]\n  },\n  plugins: [\n    { src: '~plugins/router.js' },\n    { src: '~plugins/filter.js' },\n    { src: '~plugins/swiper.js', ssr: false },\n    { src: '~plugins/image-load.js', ssr: false },\n    { src: '~plugins/image-popup.js', ssr: false }\n  ],\n  router: {\n    linkActiveClass: 'active'\n  },\n  transition: {\n    name: 'fade',\n    mode: 'out-in'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","/**\n * @desc server routes\n * @author Jooger <zzy1198258955@163.com>\n * @date 15 Sep 2017\n */\n\nimport config from '../config'\nimport { articleController, userController, hookController, optionController } from './controllers'\n\nexport default router => {\n  router.use('*', (ctx, next) => {\n    const { request, response } = ctx\n    const allowedOrigins = config.server.allowedOrigins\n    const origin = request.get('origin') || ''\n    const allowed = origin.includes('localhost') ||\n      (process.env.NODE_ENV === 'development' && request.query._DEV_) ||\n      allowedOrigins.find(item => origin.includes(item))\n    if (allowed) {\n      response.set('Access-Control-Allow-Origin', origin)\n    }\n    ctx.response.set('Content-Type', 'application/json;charset=utf-8')\n    response.set(\"Access-Control-Allow-Methods\", \"PUT,PATCH,POST,GET,DELETE,OPTIONS\")\n\n    if (request.method === 'OPTIONS') {\n      ctx.status = 200\n      ctx.body = 'ok'\n      return\n    }\n    \n    return next()\n  })\n\n  router.all('/webhook/option', hookController.option)\n\n  router.all('article-list', '/articles', articleController.list)\n  router.all('article-detail', '/article/:number', articleController.item)\n  router.all('article-like', '/article/:number/like', articleController.like)\n\n  router.all('user-me', '/user/me', userController.me)\n\n  router.all('option', '/option', optionController)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa-respond\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-respond\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 10\n// module chunks = 0","/**\n * @desc Article controller\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nimport config from '../../config'\nimport { fetcher, handleRequest, handleSuccess, handleError, marked } from '../utils'\n\nconst mdImageReg = /^!\\[((?:\\[[^\\]]*\\]|[^[\\]]|\\](?=[^[]*\\]))*)\\]\\(\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)/\n\nconst articleCtrl = { list: {}, item: {}, like: {} }\n\nconst { owner, repo, clientId, clientSecret } = config.common.github\n\narticleCtrl.list.GET = async (ctx, next) => {\n  const { page = 1, per_page = 12, search = '', labels = '' } = ctx.query\n  let res = null\n  if (search) {\n    const q = `${search} type:issue is:public state:open in:title,body author:${owner} repo:${owner}/${repo}`\n    res = await fetcher.get('/search/issues', {\n      params: {\n        q,\n        sort: 'created',\n        order: 'asc',\n        client_id: clientId,\n        client_secret: clientSecret,\n        page,\n        per_page\n      }\n    }).catch(err => handleError({ ctx, err }))\n\n    if (res && res.data) {\n      const link = res.headers.link || ''\n      let prev = link.includes('rel=\"prev\"')\n      let next = link.includes('rel=\"next\"')\n      const articles = res.data.items ? res.data.items.map(item => {\n        item.body = articleParser(item.body)\n        return item\n      }) : []\n      handleSuccess({\n        ctx,\n        data: {\n          list: articles,\n          pagination: { prev, next, page: Number(page), per_page },\n          total: res.data.total_count\n        }\n      })\n    }\n  } else {\n    const params = {\n      filter: 'created',\n      state: 'open',\n      sort: 'created',\n      direction: 'desc',\n      client_id: clientId,\n      client_secret: clientSecret,\n      page,\n      per_page\n    }\n    if (labels) {\n      params.labels = labels\n    }\n    res = await fetcher.get(`/repos/${owner}/${repo}/issues`, { params })\n      .catch(err => handleError({ ctx, err }))\n    if (res && res.data) {\n      const link = res.headers.link || ''\n      let prev = link.includes('rel=\"prev\"')\n      let next = link.includes('rel=\"next\"')\n      const articles = res.data.map(item => {\n        item.body = articleParser(item.body)\n        return item\n      })\n      // ctx.response.set('Accept', 'application/vnd.github.squirrel-girl-preview')\n      handleSuccess({\n        ctx,\n        data: {\n          list: articles,\n          pagination: { prev, next, page: Number(page), per_page }\n        }\n      })\n    }\n  }\n\n  if (!res) {\n    handleError({ ctx })\n  }\n}\n\narticleCtrl.item.GET = async (ctx, next) => {\n  const number = ctx.params.number\n  const res = await fetcher.get(`/repos/${owner}/${repo}/issues/${number}`, {\n    headers: {\n      Accept: 'application/vnd.github.squirrel-girl-preview'\n    },\n    params: {\n      client_id: clientId,\n      client_secret: clientSecret\n    }\n  }).catch(err => handleError({ ctx, err }))\n  if (res && res.data) {\n    const detail = res.data\n    detail.body = articleParser(detail.body)\n    handleSuccess({\n      ctx,\n      data: detail\n    })\n  } else {\n    handleError({ ctx })\n  }\n}\n\narticleCtrl.like.GET = async (ctx, next) => {\n  const number = ctx.params.number\n  const res = await fetcher.get(`/repos/${owner}/${repo}/issues/${number}/reactions`, {\n    headers: {\n      Accept: 'application/vnd.github.squirrel-girl-preview'\n    },\n    params: {\n      content: 'heart',\n      per_page: 99999,\n      client_id: clientId,\n      client_secret: clientSecret\n    }\n  }).catch(err => handleError({ ctx, err }))\n\n  if (res && res.data) {\n    handleSuccess({\n      ctx,\n      data: {\n        list: res.data,\n        isLiked: !!res.data.find(item => item.user.login === owner)\n      }\n    })\n  } else {\n    handleError({ ctx })\n  }\n}\n\narticleCtrl.like.POST = async (ctx, next) => {\n  const number = ctx.params.number\n  const res = await fetcher.post(\n    `/repos/${owner}/${repo}/issues/${number}/reactions`,\n    {\n      content: 'heart',\n      client_id: clientId,\n      client_secret: clientSecret\n    },\n    {\n      headers: {\n        Accept: 'application/vnd.github.squirrel-girl-preview'\n      },\n      params: {\n        client_id: clientId,\n        client_secret: clientSecret\n      }\n    }\n  ).catch(err => handleError({ ctx, err }))\n\n  if (res && res.data) {\n    handleSuccess({ ctx })\n  } else {\n    handleError({ ctx })\n  }\n}\n\nfunction articleParser (content) {\n  const data = {}\n  const splits = content.split('\\r\\n')\n  const thumb = splits[0]\n  let cap = mdImageReg.exec(thumb)\n  if (cap) {\n    data.thumb = cap[2]\n  }\n  data.content = marked(content)\n  return data\n}\n\nexport default {\n  list: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: articleCtrl.list })\n  },\n  item: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: articleCtrl.item })\n  },\n  like: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: articleCtrl.like })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/article.js","/**\n * @desc Github Webhook controller\n * @author Jooger <zzy1198258955@163.com>\n * @date 20 Sep 2017\n */\n\nimport path from 'path'\nimport fs from 'fs'\nimport config from '../../config'\nimport { handleRequest, handleSuccess, handleError, exec, loadOption } from '../utils'\n\nconst { github, command } = config.common\nconst { repoLocalDir } = github\nconst hookCtrl = {\n  option: {}\n}\n\nhookCtrl.option.POST = async (ctx, next) => {\n  const { payload } = ctx.request.body\n\n  if (!payload) {\n    return handleError({\n      ctx,\n      message: 'payload不存在'\n    })\n  }\n\n  logger.info('----------------------option hook push start----------------------------')\n\n  await pullRepo(path.resolve(__dirname, '../../', repoLocalDir))\n\n  let option = global.option\n  if (process.env.NODE_ENV === 'production') {\n    option = loadOption()\n  }\n\n  if (option) {\n    global.option = option\n    handleSuccess({ ctx, message: '配置更新成功' })\n  } else {\n    handleError({ ctx, message: '配置更新失败' })\n  }\n\n  logger.info('----------------------option hook push end----------------------------')\n}\n\n// 拉取仓库\nasync function pullRepo (dir) {\n  if (!fs.existsSync(dir)) {\n    fs.mkdirSync(dir)\n  }\n\n  const { PULL } = command\n  logger.info('正在拉取仓库...')\n  await exec(PULL, { cwd: dir }).catch(err => console.error(err))\n  logger.info('拉取仓库完成')\n}\n\nexport default {\n  option: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: hookCtrl.option })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/hook.js","/**\n * @desc Controllers entry\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nexport { default as articleController } from './article'\nexport { default as userController } from './user'\nexport { default as hookController } from './hook'\nexport { default as optionController } from './option'\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/index.js","/**\n * @desc Option\n * @author Jooger <zzy1198258955@163.com>\n * @date 20 Sep 2017\n */\n\nimport { handleRequest, handleSuccess } from '../utils'\nconst optionCtrl = {}\n\noptionCtrl.GET = async (ctx, next) => {\n  handleSuccess({\n    ctx,\n    data: global.option || {}\n  })\n}\n\nexport default async (ctx, next) => {\n  await handleRequest({ ctx, next, type: optionCtrl })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/option.js","/**\n * @desc User controller\n * @author Jooger <zzy1198258955@163.com>\n * @date 19 Sep 2017\n */\n\nimport config from '../../config'\nimport { fetcher, handleRequest, handleSuccess, handleError } from '../utils'\nconst { owner, clientId, clientSecret } = config.common.github\nconst userCtrl = { me: {} }\n\nuserCtrl.me.GET = async (ctx, next) => {\n  const res = await fetcher.get(`/users/${owner}`, {\n    params: {\n      client_id: clientId,\n      client_secret: clientSecret\n    }\n  }).catch(err => handleError({ ctx, err }))\n\n  if (res && res.data) {\n    handleSuccess({\n      ctx,\n      data: res.data\n    })\n  } else {\n    handleError({ ctx })\n  }\n}\n\nexport default {\n  me: async (ctx, next) => {\n    await handleRequest({ ctx, next, type: userCtrl.me })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","/**\n * @desc 利用Node原生异步子进程执行命令\n * @author Jooger <zzy1198258955@163.com>\n * @date 20 Sep 2017\n */\n\nconst { exec } = require('child_process')\n\nexport default (cmd, opts) => {\n  return new Promise((resolve, reject) => {\n    if (!cmd) {\n      return reject(new Error('command is required'))\n    }\n    exec(cmd, opts, (err, stdout, stderr) => {\n      if (err) {\n        return reject(err)\n      }\n      console.log(stdout, stderr)\n      resolve(stdout, stderr)\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/exec.js","/**\n * @desc Load Option\n * @author Jooger <zzy1198258955@163.com>\n * @date 21 Sep 2017\n */\n\nimport path from 'path'\nimport fs from 'fs'\nimport watch from 'node-watch'\nimport yaml from 'js-yaml'\nimport config from '../../config'\n\nconst isProd = process.env.NODE_ENV === 'production'\n\nexport default () => {\n  const dir = path.resolve(__dirname, '../../', config.common.github.repoLocalDir)\n  const optionFile = path.join(dir, './_config.yml')\n\n  let option = null\n\n  if (!fs.existsSync(optionFile)) {\n    logger.info('配置文件未找到')\n    return option\n  }\n\n  option = loadYml(optionFile)\n\n  if (!isProd) {\n    watchYml(optionFile)\n  }\n\n  return option\n}\n\nfunction loadYml (path) {\n  let data = null\n  try {\n    data = yaml.safeLoad(fs.readFileSync(path, 'utf8'))\n  } catch (err) {\n    logger.info('配置文件读取失败, err：', err)\n    return data\n  }\n  logger.info('配置文件读取成功')\n  return data\n}\n\nfunction watchYml (path) {\n  watch(path, { recursive: true }, (evt, name) => {\n    logger.info('配置文件有更新')\n    const data = loadYml(path)\n    global.option = data\n  })\n  logger.info('正在监控配置文件变动...')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/loadOption.js","/**\n *  渲染markdown\n */\n\nimport highlight from 'highlight.js'\nimport marked from 'marked'\n\nconst languages = ['xml', 'bash', 'css', 'markdown', 'http', 'java', 'javascript', 'json', 'makefile', 'nginx', 'python', 'scss', 'sql', 'stylus']\nhighlight.registerLanguage('xml', require('highlight.js/lib/languages/xml'))\nhighlight.registerLanguage('bash', require('highlight.js/lib/languages/bash'))\nhighlight.registerLanguage('css', require('highlight.js/lib/languages/css'))\nhighlight.registerLanguage('markdown', require('highlight.js/lib/languages/markdown'))\nhighlight.registerLanguage('http', require('highlight.js/lib/languages/http'))\nhighlight.registerLanguage('java', require('highlight.js/lib/languages/java'))\nhighlight.registerLanguage('javascript', require('highlight.js/lib/languages/javascript'))\nhighlight.registerLanguage('json', require('highlight.js/lib/languages/json'))\nhighlight.registerLanguage('makefile', require('highlight.js/lib/languages/makefile'))\nhighlight.registerLanguage('nginx', require('highlight.js/lib/languages/nginx'))\nhighlight.registerLanguage('python', require('highlight.js/lib/languages/python'))\nhighlight.registerLanguage('scss', require('highlight.js/lib/languages/scss'))\nhighlight.registerLanguage('sql', require('highlight.js/lib/languages/sql'))\nhighlight.registerLanguage('stylus', require('highlight.js/lib/languages/stylus'))\nhighlight.configure({\n  classPrefix: ''     // don't append class prefix\n})\n\nconst renderer = new marked.Renderer()\n\nrenderer.heading = function (text, level) {\n  return `<h${level} id=\"${generateId()}\">${text}</h${level}>`\n}\n\nrenderer.link = function (href, title, text) {\n  const isOrigin = href.indexOf('jooger.me') > -1\n  const isImage = /(<img.*?)>/gi.test(text)\n  return `\n    <a href=${href}\n    target=\"_blank\"\n    class=\"${isImage ? 'img-link' : 'link'}\"\n    ${isImage && 'onclick=\"\"'}\n    title=\"${title || ''}\"\n    ${isOrigin ? '' : 'rel=\"external nofollow\"'}>${text}</a>\n  `.replace(/\\s+/g, ' ').replace('\\n', '')\n}\n\nrenderer.image = function (href, title, text) {\n  return `\n    <img class=\"image-view\"\n      src=\"${href}\"\n      title=\"${title || text || 'jooger.me'}\"\n      alt=\"${text || title || href}\"\n    ${this.options.xhtml ? '/' : ''}>\n  `.replace(/\\s+/g, ' ').replace('\\n', '')\n}\n\nrenderer.code = function (code, lang, escaped) {\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang)\n    if (out != null && out !== code) {\n      escaped = true\n      code = out\n    }\n  }\n\n  const codeLine = '<ul class=\"code-line\">' +\n    code.split('\\n').map((line, index) => `<li class=\"line\">${index + 1}</li>`.replace(/\\s+/g, ' ')).join('') +\n    '</ul>'\n\n  if (!lang) {\n    return '<pre>' + codeLine + '<code>' +\n      (escaped ? code : escape(code, true)) +\n      '\\n</code></pre>'\n  }\n\n  return '<pre>' + codeLine + '<code class=\"' +\n    this.options.langPrefix +\n    escape(lang, true) +\n    '\">' +\n    (escaped ? code : escape(code, true)) +\n    '\\n</code></pre>\\n'\n}\n\nmarked.setOptions({\n  renderer,\n  gfm: true,\n  pedantic: false,\n  sanitize: false,\n  tables: true,\n  breaks: true,\n  smartLists: true,\n  smartypants: true,\n  highlight (code, lang) {\n    if (!~languages.indexOf(lang)) {\n      return highlight.highlightAuto(code).value\n    }\n    return highlight.highlight(lang, code).value\n  }\n})\n\n// 生成文章中的title id\nfunction generateId (len) {\n  const chars = `ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz`\n  len = len | 8\n  let id = ''\n  for (let i = 0; i < len; i++) {\n    id += chars[Math.floor(Math.random() * chars.length)]\n  }\n  return id\n}\n\nfunction escape (html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;')\n}\n\nexport default marked\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/marked.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"highlight.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/bash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/bash\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/css\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/css\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/http\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/java\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/java\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/javascript\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/json\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/makefile\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/makefile\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/markdown\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/markdown\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/nginx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/nginx\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/python\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/python\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/scss\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/scss\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/sql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/sql\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/stylus\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/stylus\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"highlight.js/lib/languages/xml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js/lib/languages/xml\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"marked\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"marked\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"node-watch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-watch\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"simple-node-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"simple-node-logger\"\n// module id = 40\n// module chunks = 0","import Koa from 'koa'\nimport Router from 'koa-router'\nimport respond from 'koa-respond'\nimport { Nuxt, Builder } from 'nuxt'\nimport routes from './routes'\nimport config from '../config'\nimport nuxtConfig from '../nuxt.config'\nimport { logger, loadOption } from './utils'\n\nglobal.logger = logger\nglobal.option = loadOption() || {}\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3000\n\n// Set Nuxt.js options\nnuxtConfig.dev = !(app.env === 'production')\n\n// Instantiate nuxt.js\nconst nuxt = new Nuxt(nuxtConfig)\n\n// Build in development\nif (nuxtConfig.dev) {\n  const builder = new Builder(nuxt)\n  builder.build().catch(e => {\n    console.error(e) // eslint-disable-line no-console\n    process.exit(1)\n  })\n}\n\napp.use(respond({\n  methods: {\n    success: (ctx, body) => {\n      body = Object.assign({}, {\n        code: config.common.code.SUCCESS\n      }, body)\n      ctx.send(200, body)\n    },\n    failed: (ctx, body) => {\n      body = Object.assign({}, {\n        code: config.common.code.FAILED\n      }, body)\n      ctx.send(200, body)\n    }\n  }\n}))\n\napp.use((ctx, next) => {\n  if (ctx.url.includes('/api')) {\n    return next()\n  }\n  ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n  return new Promise((resolve, reject) => {\n    ctx.res.on('close', resolve)\n    ctx.res.on('finish', resolve)\n    nuxt.render(ctx.req, ctx.res, promise => {\n      // nuxt.render passes a rejected promise into callback on error.\n      promise.then(resolve).catch(reject)\n    })\n  })\n})\n\nconst router = new Router({\n  prefix: '/api'\n})\nroutes(router)\napp.use(router.routes(), router.allowedMethods())\n\napp.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}